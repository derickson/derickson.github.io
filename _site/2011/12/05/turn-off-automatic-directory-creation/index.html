<!DOCTYPE html>
<html lang="en">
<head>
	<meta charset="utf-8">
	<title>Turn OFF Automatic Directory Creation - Front2BackDev</title>
	<meta name="description" content="">
	<meta http-equiv="X-UA-Compatible" content="IE=edge">
	<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
	<meta property="og:image" content="">
	<link rel="shortcut icon" href="/assets/img/favicon/favicon.ico" type="image/x-icon">
	<link rel="apple-touch-icon" href="/assets/img/favicon/apple-touch-icon.png">
	<link rel="apple-touch-icon" sizes="72x72" href="/assets/img/favicon/apple-touch-icon-72x72.png">
	<link rel="apple-touch-icon" sizes="114x114" href="/assets/img/favicon/apple-touch-icon-114x114.png">
	<link rel="alternate" type="application/atom+xml" title="Azathought Blog" href="/feed.xml" />
	<!-- Chrome, Firefox OS and Opera -->
	<meta name="theme-color" content="#263959">
	<!-- Windows Phone -->
	<meta name="msapplication-navbutton-color" content="#263959">
	<!-- iOS Safari -->
	<meta name="apple-mobile-web-app-status-bar-style" content="#263959">
	<!-- Google Fonts -->
	<link href="https://fonts.googleapis.com/css?family=PT+Serif:400,700" rel="stylesheet">
	<link href="https://fonts.googleapis.com/css?family=Lato:300,400,700" rel="stylesheet">
	<!-- Font Awesome -->
	<link rel="stylesheet" href="/assets/fonts/font-awesome/css/font-awesome.min.css">
	<!-- Styles -->
	<link rel="stylesheet" href="/assets/css/main.css">
</head>

<body>

  <div class="wrapper">


	  <aside class="sidebar">
	  	<header>
	    <div class="about">
	      <div class="cover-author-image">
	        <a href="/"><img src="/assets/img/caricature.png" alt="Dave Erickson"></a>
	      </div>
	      <div class="author-name">Dave Erickson</div>
	      <p>A geek in Washington, DC.</p>

			<div class="navigation">
				<input type="text" class="st-default-search-input page-link">
				<br/>
			
			  
			  	
			  		<a class="page-link tag" href="/archive/">Archive</a>
			  	
				  
			
			  
			
			  
			  	
			  		<a class="page-link tag" href="/tags/">Tags</a>
			  	
				  
			
			  
			  	
				  
			
			  
			  	
				  
			
			  
			
			  
			
			  
			
			  
			
			  
			

			</div>

			 <script type="text/javascript">
			  (function(w,d,t,u,n,s,e){w['SwiftypeObject']=n;w[n]=w[n]||function(){
			  (w[n].q=w[n].q||[]).push(arguments);};s=d.createElement(t);
			  e=d.getElementsByTagName(t)[0];s.async=1;s.src=u;e.parentNode.insertBefore(s,e);
			  })(window,document,'script','//s.swiftypecdn.com/install/v2/st.js','_st');
			  
			  _st('install','yWp_Lhv9nqdDCanwfz6H','2.0.0');
			</script>
	    </div>
	  </header> <!-- End Header -->
	  <footer>
	    <section class="contact">
	      <h3 class="contact-title">Contact me</h3>
	      <ul>
	        
	          <li><a href="https://twitter.com/davebenigno" target="_blank"><i class="fa fa-twitter" aria-hidden="true"></i></a></li>
	        
	        
	        
	        
	      </ul>
	    </section> <!-- End Section Contact -->
	    <div class="copyright">
	      <p>2018 &copy; Dave Erickson</p>
	    </div>
	  </footer> <!-- End Footer -->
		  
	  </aside> <!-- End Sidebar -->

      <div class="content-box clearfix">
  <article class="article-page">
  <div class="page-content">
    <div class="page-cover-image">
      <img class="page-image" src=/images/ alt="Turn OFF Automatic Directory Creation">
    </div> <!-- End Page Cover Image -->
    <div class="wrap-content">
      <header class="header-page">
        <h1 class="page-title">Turn OFF Automatic Directory Creation</h1>
        <div class="page-date"><span>Dec 05, 2011&nbsp;&nbsp;&nbsp;&nbsp;</span></div>
      </header>
      <p><a href="/wp-content/uploads/2011/12/directorycreation.jpg"><img class="aligncenter size-full wp-image-66" title="directorycreation" src="/wp-content/uploads/2011/12/directorycreation.jpg" alt="directory creation: manual" width="558" height="47" /></a></p>

<p>Consider this an opinionated pro-tip.  When you create a new database in MarkLogic there is a setting called <em>directory creation</em> that defaults to “automatic.”  You don’t want that for your content databases.  You want “manual.”</p>

<p><em>Directory creation:</em> automatic creates directory property fragments for inferred parent folders as you insert documents into URIs that resemble a file system path structure.  The property fragments exist for the explicit purpose of supporting WebDAV access to the database.  Setting it to manual does not affect the behavior of cts:directory-query(), xdmp:directory(), or other “directory” XQuery functions.</p>

<p>The problem with leaving this setting in “automatic” mode is that the inferred parent directory property fragments will get involved in locking anytime you touch a URI during an update transaction.  Because it is highly likely that any two documents in your database will share a directory in their inferred parentage, say “/” for example, you are now effectively getting into locking contention every time two activities in your application want to write in parallel.  You don’t want this.  You want a “shared-nothing” architecture that minimizes locking.</p>

<p>So set <em>directory creation</em> to “manual” immediately after you create your content databases so you don’t have to delete the directory property fragments after you have loaded all your data.  Giving up WebDAV on content databases is far preferable to having performance problems once you start testing with multiple concurrent users or multi-threaded data loaders.</p>

<p>While you are at it, turn on the <em>URI Lexicon</em> and disable <em>maintain last modified</em> unless you need it.  The <em>URI Lexicon</em> is a requirement for using cts:uris() and working with tools like XQSync and CoRB, which you will most likely need later in your project.  <em>Maintain last modified</em> creates document property fragments.  If you weren’t doing anything with these property fragments you should probably turn this off to keep the number of fragments in your database down.</p>

<p>— Dave</p>


      <div class="page-footer">
        <div class="page-share">
          <a href="https://twitter.com/intent/tweet?text=Turn OFF Automatic Directory Creation&url=http://localhost:4000/2011/12/05/turn-off-automatic-directory-creation/" title="Share on Twitter" rel="nofollow" target="_blank">Twitter</a>
          <a href="https://facebook.com/sharer.php?u=http://localhost:4000/2011/12/05/turn-off-automatic-directory-creation/" title="Share on Facebook" rel="nofollow" target="_blank">Facebook</a>
          <a href="https://plus.google.com/share?url=http://localhost:4000/2011/12/05/turn-off-automatic-directory-creation/" title="Share on Google+" rel="nofollow" target="_blank">Google+</a>
        </div>
        <div class="page-tag">
          
            <a href="/tags#locking" class="tag">&#35; locking</a>
          
            <a href="/tags#MarkLogic" class="tag">&#35; MarkLogic</a>
          
            <a href="/tags#settings" class="tag">&#35; settings</a>
          
        </div>
      </div>
      <section class="comment-area">
  <div class="comment-wrapper">
    
  </div>
</section> <!-- End Comment Area -->

    </div> <!-- End Wrap Content -->
  </div> <!-- End Page Content -->
</article> <!-- End Article Page -->

</div>

  </div>
  
  <script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
  (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
  m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');
  ga('create', 'UA-27466203-1', 'auto');
  ga('send', 'pageview');
</script> <!-- End Analytics -->

</body>
</html>
